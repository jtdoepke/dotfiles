- clean: ['~']

- shell:
  - [mkdir -p ~/.config/fish, Make fish config dir]
  - command: sudo add-apt-repository ppa:fish-shell/release-2
    description: Add fish repo
    stdin: true
    stdout: true
    stderr: true

- link:
    ~/.bashrc: bashrc
    ~/.config/fish/config.fish: fish/config.fish
    ~/.gitconfig: gitconfig
    ~/.tmux.conf: tmux.conf
    ~/.ackrc: ackrc
    ~/.vimrc: vimrc
    ~/.config/thefuck: thefuck

- pacapt:
  - fish
  - git
  - git-svn
  - wget
  - curl
  - bzip2
  - thefuck
  - httpie
  - golang
  - tmux

  - ubuntu: virtualenv
    fedora:
      - python2-virtualenv
      - python3-virtualenv

  # Python dependencies
  - ubuntu: build-essential
    fedora:
    - make
    - automake
    - gcc
    - gcc-c++
    - kernel-devel

  - ubuntu:
    - sqlite3
    - libsqlite3-dev
    fedora:
    - sqlite
    - sqlite-devel

  - ubuntu:
    - llvm
    - libncurses5-dev
    - libncursesw5-dev
    - tk-dev

  - ubuntu: libssl-dev
    fedora: openssl-devel

  - ubuntu: zlib1g-dev
    fedora: zlib-devel

  - ubuntu: libbz2-dev
    fedora: bzip2-devel

  - ubuntu: libreadline-dev
    fedora: readline-devel

  - ubuntu: xz-utils
    fedora:
    - xz
    - xz-devel


- shell:
  # Create directories
  - [mkdir -p ~/src/github.com, Creating github.com dir]
  - [mkdir -p ~/src/gitlab.com, Creating gitlab.com dir]
  - [mkdir -p ~/src/bitbucket.org, Creating bitbucket.org dir]
  - [mkdir -p ~/bin, Creating bin dir]
  - [mkdir -p ~/tmp, Creating tmp dir]
  - [mkdir -p ~/.local/bin, Creating .local/bin]
  - [mkdir -p ~/.config, Creating .config]

  - command: chsh -s $(which fish)
    description: Setting fish as default shell
    stdin: true
    stdout: true
    stderr: true

  - [git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf, Clone fzf]
  - [~/.fzf/install --bin, Install fzf]

  # Install fish plugins
  - ["curl -L https://get.oh-my.fish > install_oh_my_fish", Getting Oh My Fish installer]
  - command: fish install_oh_my_fish --noninteractive || true
    description: Installing Oh My Fish
    stdout: true
  - ["curl -Lo ~/.config/fish/functions/fisher.fish --create-dirs https://git.io/fisher", Installing fisherman]
  - [fish -c 'fisher install done', "Installing fisher plugin: done"]
  - [fish -c 'fisher install edc/bass', "Installing fisher plugin: edc/bass"]
  - [fish -c 'fisher install jtdoepke/plugin-proxy', "Installing fisher plugin: jtdoepke/plugin-proxy"]
  - [fish -c 'fisher install omf/thefuck', "Installing fisher plugin: omf/thefuck"]
  - [fish -c 'fisher install pyenv', "Installing fisher plugin: pyenv"]
  - [fish -c 'fisher install z', "Installing fisher plugin: z"]
  - [fish -c 'fisher install fzf', "Installing fisher plugin: fzf"]
  - [fish -c 'fisher install laughedelic/pisces', "Installing fisher plugin: laughedelic/pisces"]

  # Install neovim
  - ["curl -L https://github.com/neovim/neovim/releases/download/nightly/nvim.appimage > ~/.local/bin/nvim.appimage && mv ~/.local/bin/nvim.appimage ~/.local/bin/nvim && chmod +x ~/.local/bin/nvim", Install neovim]

  # Install pyenv and Python
  - ["curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash", Installing pyenv]
  - [pyenv install -s 2.7.14, Installing Python 2.7]
  - [pyenv install -s 3.6.4, Installing Python 3.6]
  - [pyenv global 3.6.4 2.7.14 system, Setting prefered Python version]

  # Python command line tools
  - ["curl https://raw.githubusercontent.com/mitsuhiko/pipsi/master/get-pipsi.py | python", Installing pipsi]
  - [pipsi install --python=python3.6 pipenv, Installing pipenv]
  - [pipsi install --python=python3.6 borgbackup, Installing borgbackup]
  - [pipsi install --python=python3.6 cookiecutter, Installing cookiecutter]
  - [pipsi install --python=python3.6 flake8, Installing flake8]
  - ["~/.local/venvs/flake8/bin/pip install -U flake8-isort flake8-docstring", Adding flake8 pluggins]
  - [pipsi install --python=python3.6 howdoi, Installing howdoi]
  - [pipsi install --python=python3.6 isort, Installing isort]
  - [pipsi install --python=python3.6 jrnl, Installing jrnl]
  - [pipsi install --python=python3.6 magic-wormhole, Installing magic-wormhole]
  - [pipsi install --python=python3.6 pre-commit, Installing pre-commit]
  # unp doesn't work in Python 3 yet.
  - [pipsi install --python=python2.7 unp, Installing unp]
